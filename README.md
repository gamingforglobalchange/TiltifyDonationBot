# TiltifyDonationBot
A bot that sends a message in Twitch chat when a new Tiltify donation is detected. Developed for use in [Gaming For Global Change](https://gamingforglobalchange.org/) events.

![Screenshot of Twitch bot](https://i.ibb.co/hFpRmfj/download-1.png)

## Installation
**Note: TiltifyDonationBot requires Python 3.7 or higher.**

First, clone this repository, move to the directory created, and install all dependencies by running `python -m pip install -r requirements.txt` or `python3 -m pip install -r requirements.txt` (Python 2 may be pre-installed on some systems as `python` - check what version you have with `python -V`).

Then, open `bot.py`, and change the necessary variables to your credentials. Here's what you need:

- `tiltify_access_token`: Generated by creating an application on your Tiltify dashboard. [Refer to this link to find out how.](https://info.tiltify.com/support/solutions/articles/43000038793-connected-accounts)
- `tiltify_username`: The username of the Tiltify account with the campaign you want to set up alerts  for.
- `tiltify_campaign_slug`: The part of the campaign URL that refers to the name of the campaign itself. For example, [in this campaign](https://tiltify.com/@gamingforglobalchange/spring-water-campaign/donate/complete) it's `spring-water-campaign`.
- `twitch_channel_names`: The usernames of the Twitch channels you want to send the alerts to.
  - If you're only sending to one channel, this should equal `["yourchannel"]`. If you're sending to multiple, the formatting is `["channel1", "channel2", "channel3"]` and so on.
- `twitch_bot_username`: The username of the of the Twitch bot account sending the alerts.
- `twitch_client_id`: Generated by creating an application on your Twitch Developers dashboard. [Refer to this link to find out how.](https://dev.twitch.tv/docs/authentication#registration)
- `twitch_oauth_token`: Can be easily obtained by logging in with your Twitch account [here.](https://twitchapps.com/tmi/) 

Save your changes. Finally, run the bot with `python bot.py` or `python3 bot.py` and you should be up and running!

## Limitations
This bot was developed with edge cases in mind, however there are still some extreme situations to consider. Since the bot relies on calling external APIs, it may be subject to any rate limiting done on the part of the API maintainers. 

The Tiltify API is only called every 5 seconds by default - you can change this if you wish, but you are the only one responsible if you get blacklisted. Twitch's v5 API rate limit is very generous at 800 calls per minute (with OAuth), meaning you can effectively send 800 donation alerts per minute before getting limited. This should be more than enough for practically every use case, and I have not implemented any limit in the code because of this, however please keep this in mind if you are using this for an extremely high volume fundraiser. 

For now, one of the checks to see if there are any new donations relies on the clock of the system the bot is running on. There is a generous 1000ms tolerance for any slight inaccuracies involved, but this is nonetheless still a potential point of failure if you are dealing with a system with significant clock inaccuracy issues.
